<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <meta name="yandex-verification" content="f7918c520c4b54dd" />
        <title>Общественная записная книжка - бд</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a href="https://github.com/kaefik">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="/">Общественная записная книжка  <strong>следы для себя и потомков</strong></a></h1>
                <nav><ul>
                </ul>
<form id="search" action"#" onsubmit="javascript:window.open('https://duckduckgo.com/?q='+document.getElementById('keywords').value+'+site:www.kaefik.ru');">
                        <input id="keywords" type="text" />
                    </form>
                </nav>
<div id="submenu">
                    <ul>
                            <li><a href="/category/anime.html">anime</a></li>
                            <li><a href="/category/arduino.html">arduino</a></li>
                            <li><a href="/category/bios.html">bios</a></li>
                            <li><a href="/category/blogger.html">blogger</a></li>
                            <li><a href="/category/chromeos.html">chromeos</a></li>
                            <li><a href="/category/clojure.html">clojure</a></li>
                            <li><a href="/category/design.html">design</a></li>
                            <li><a href="/category/docker.html">docker</a></li>
                            <li><a href="/category/freepbx.html">freepbx</a></li>
                            <li><a href="/category/game.html">game</a></li>
                            <li><a href="/category/git.html">git</a></li>
                            <li><a href="/category/go.html">go</a></li>
                            <li><a href="/category/hackintosh.html">hackintosh</a></li>
                            <li><a href="/category/hobby.html">hobby</a></li>
                            <li><a href="/category/internet.html">internet</a></li>
                            <li><a href="/category/javascript.html">javascript</a></li>
                            <li><a href="/category/lego.html">lego</a></li>
                            <li><a href="/category/linux.html">linux</a></li>
                            <li><a href="/category/lua.html">lua</a></li>
                            <li><a href="/category/machine_learning.html">machine_learning</a></li>
                            <li><a href="/category/main.html">main</a></li>
                            <li><a href="/category/markdown.html">markdown</a></li>
                            <li><a href="/category/miband.html">miband</a></li>
                            <li><a href="/category/minecraft.html">minecraft</a></li>
                            <li><a href="/category/miui.html">miui</a></li>
                            <li><a href="/category/money.html">money</a></li>
                            <li><a href="/category/mongodb.html">mongodb</a></li>
                            <li><a href="/category/mouse.html">mouse</a></li>
                            <li><a href="/category/network.html">network</a></li>
                            <li><a href="/category/openstreetmap.html">openstreetmap</a></li>
                            <li><a href="/category/os.html">os</a></li>
                            <li><a href="/category/otkrytye-dannye.html">открытые данные</a></li>
                            <li><a href="/category/postgis.html">postgis</a></li>
                            <li><a href="/category/postgresql.html">PostgreSQL</a></li>
                            <li><a href="/category/powershell.html">powershell</a></li>
                            <li><a href="/category/programming.html">programming</a></li>
                            <li><a href="/category/projects.html">projects</a></li>
                            <li><a href="/category/projects-spotifyyandex-musicpython.html">projects, spotify,yandex-music,python</a></li>
                            <li><a href="/category/python.html">python</a></li>
                            <li><a href="/category/radio.html">radio</a></li>
                            <li><a href="/category/rest-api.html">rest-api</a></li>
                            <li><a href="/category/rust.html">rust</a></li>
                            <li><a href="/category/sailfish.html">sailfish</a></li>
                            <li><a href="/category/security.html">security</a></li>
                            <li><a href="/category/selenium.html">selenium</a></li>
                            <li><a href="/category/shell.html">shell</a></li>
                            <li><a href="/category/swift.html">swift</a></li>
                            <li><a href="/category/tatar.html">tatar</a></li>
                            <li><a href="/category/upwork.html">upwork</a></li>
                            <li><a href="/category/video.html">video</a></li>
                            <li><a href="/category/vim.html">vim</a></li>
                            <li><a href="/category/voice-assistant.html">voice-assistant</a></li>
                            <li><a href="/category/vscode.html">vscode</a></li>
                            <li><a href="/category/web.html">web</a></li>
                            <li><a href="/category/windows.html">windows</a></li>
                    </ul>
                <div>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/2018/08/31/reactjs/">React.js - что это?!</a></h1>
<footer class="post-info">
        <span>Fri 31 August 2018</span>
<span>| tags: <a href="/tag/bd.html">бд</a><a href="/tag/programmirovanie.html">программирование</a><a href="/tag/javascript.html">javascript</a><a href="/tag/react.html">react</a></span>
</footer><!-- /.post-info --><h2>Полезные ссылки</h2>
<ul>
<li><a href="https://reactjs.org/">React JS</a></li>
<li><a href="https://github.com/facebook/create-react-app">create-react-app (GitHub)</a></li>
<li><a href="https://habr.com/post/319270/">JSX подробности</a>(статья)</li>
</ul>
<h2>Дополнительные библиотеки</h2>
<ul>
<li><a href="https://www.npmjs.com/package/classnames">classnames</a> - A simple JavaScript utility for conditionally joining classNames together.  ( yarn add classnames )</li>
</ul>
<h3>Create-React-App</h3>
<div class="highlight"><pre><span></span>npm i -g create-react-app

npm
npm init react-app my-app

Yarn
yarn create react-app my-app

npm start   - запуск приложения
npm run eject
</pre></div>


<p>При возникновении ошибки react-scripts: command not found :</p>
<div class="highlight"><pre><span></span>yarn upgrade
yarn
yarn run start
</pre></div>


<h2>Концепции React JS</h2>
<ul>
<li>
<p>virtual DOM</p>
</li>
<li>
<p>компонентная разработка</p>
</li>
<li>
<p>jsx - способ описать html-вёрстку в js</p>
</li>
</ul>
<h3>Основные способы создания компоненты</h3>
<ul>
<li>Расширить класс Component</li>
</ul>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">HelloWorld</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="o">!&lt;</span><span class="err">/div&gt;;</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>Расширить класс PureComponent</li>
</ul>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">HelloWorld</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PureComponent</span> <span class="p">{</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="o">!&lt;</span><span class="err">/div&gt;;</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>Написать функцию возвращающую jsx</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">HelloWorld</span> <span class="p">()</span> <span class="p">{</span>
<span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>
</pre></div>


<p>Компоненты получают данные через props - атрибуты тега компоненты:</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">Comment</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="kr">const</span> <span class="p">{</span><span class="nx">author</span><span class="p">,</span> <span class="nx">text</span><span class="p">}</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
<span class="k">return</span> <span class="p">(</span>
<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">h4</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">author</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h4&gt;</span>
<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">CommentList</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;hello!&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;Bill&#39;</span><span class="p">},</span>
<span class="p">{</span><span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;How are you?&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;Mary&#39;</span><span class="p">}</span>
<span class="p">];</span>
<span class="k">return</span> <span class="p">(</span>
<span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
<span class="p">{</span><span class="nx">comments</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">comment</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="k">return</span> <span class="o">&lt;</span><span class="nx">Comment</span> <span class="nx">author</span><span class="o">=</span><span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span> <span class="nx">text</span><span class="o">=</span><span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
<span class="p">})}</span>
<span class="o">&lt;</span><span class="err">/ul&gt;</span>
<span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Состояние компоненты - this.state
- Передать объект </p>
<div class="highlight"><pre><span></span>         <span class="o">```</span><span class="n">javascript</span>
          <span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">(</span><span class="err">{</span><span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="err">}</span><span class="p">)</span>
         <span class="o">```</span>


     <span class="err">​</span>
</pre></div>


<ul>
<li>
<p>Передать функцию </p>
<p><code>javascript
 this.setState(state =&gt; ({...state, a: 1}))</code></p>
</li>
</ul>
<p>Функциональный компонент (созданных лишь одной функцией) -  нет состояния и функций жизненного цикла.</p>
<p>Потомки тегов <Parent><Children /></Parent></p>
<p>props.children  - для работы с детьми тегов.</p>
<p>Для работы со списками детей у реакта есть функция помощник React.Children.map, и если вы хотите обернуть каждого ребенка в дополнительный тег:</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">Parent</span> <span class="o">=</span> <span class="nx">props</span> <span class="p">=&gt;</span> <span class="p">(</span>
<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Parent</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="p">{</span><span class="nx">React</span><span class="p">.</span><span class="nx">Children</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">child</span> <span class="p">=&gt;</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">child</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;)}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>
</pre></div>


<p>Порядок вызовов методов компоненты</p>
<hr>
<h3>Монтирование компоненты</h3>
<ul>
<li>
<p>constructor</p>
</li>
<li>
<p>componentWillMount</p>
</li>
<li>
<p>render</p>
</li>
<li>
<p>componentDidMount</p>
</li>
</ul>
<h3>Обновление компоненты</h3>
<ul>
<li>
<p>compoentWillReceiveProps</p>
</li>
<li>
<p>shouldComponentUpdate</p>
</li>
<li>
<p>componentWillUpdate</p>
</li>
<li>
<p>render</p>
</li>
<li>
<p>componentDidUpdate</p>
</li>
</ul>
<h3>Удаление компоненты</h3>
<ul>
<li>
<p>componentWillUnmoun</p>
</li>
<li>
<p>forceUpdate()</p>
</li>
</ul>
<p>По умолчанию, компонент вызывает метод render только если он получает новые props, меняет state или монтируется. Есть возможность вызвать в ручную метод render, с помощью forceUpdate.
В нормальной ситуации не стоит вызывать метод, а когда покажется что стоит, нужно подумать еще 7 раз.</p>
<ul>
<li>defaultProps </li>
</ul>
<p>Это переменная класса, для того чтобы задать props по-умолчанию. Желательно задать все props, от которых зависит render компоненты.</p>
<ul>
<li>displayName</li>
</ul>
<p>Это переменная класса нужна только при разработке и дебагинге. Помогает увидеть, где точно произошла ошибка в стеке ошибок.</p>
<h3>События в React</h3>
<p>Для работы с событиями, поступающими от тега или компонента, необходимо использовать атрибут компонента onChange.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">Form</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
<span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
<span class="p">};</span>
<span class="nx">handleOnChange</span> <span class="o">=</span> <span class="nx">event</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">value</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
<span class="p">};</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="k">return</span> <span class="p">(</span>
<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleOnChange</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Cуществуют методы onInput для получения событий input, onSubmit для тегов form, onClick, onFocus для событий получения фокуса и onBlur для событий удаления фокуса.</p>
<h4>Cписок обработчиков событий для мышки:</h4>
<p>onClick, onContextMenu, onDoubleClick, onDrag, onDragEnd, onDragEnter, onDragExit, onDragLeave, onDragOver, onDragStart, onDrop, onMouseDown, onMouseEnter, onMouseLeave, onMouseMove, onMouseOut, onMouseOver, onMouseUp.</p>
<p>Все обработчики событий получают синтетическое событие, если нужно остановить баблинг события, можно воспользоваться event.preventDefault() иди event.stopPropagation().</p>
<p>Если нужно передать событие, и воспользоваться им в асинхронном коде, в следующих тиках — необходимо вызвать метод event.persist() чтобы реакт отдал вам это событие.</p>
<h4>Проверка типов PropTypes</h4>
<p>Для установки нужно выполнить команду:</p>
<div class="highlight"><pre><span></span><span class="err">yarn add prop-types</span>
</pre></div>


<h4>Чтобы перечислить типы параметров компоненты:</h4>
<ol>
<li>Добавить параметр propTypes к уже созданному классу или функции:</li>
</ol>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">PropTypes</span> <span class="nx">from</span> <span class="s1">&#39;prop-types&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">({</span><span class="nx">name</span><span class="p">})</span> <span class="p">=&gt;</span>
<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Hi</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/p&gt;</span>
<span class="nx">Greeting</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">name</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
<span class="nx">name2</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">isRequired</span>  <span class="c1">//  isRequired указывает что переменная обязательно</span>
<span class="p">}</span>
</pre></div>


<ol>
<li>Для классов можно объявить статическую внутреннюю переменную propTypes для того, чтобы объявлять необходимые типы прямо в компоненте:</li>
</ol>
<p>```javascript
   import PropTypes from 'prop-types';
   import React from 'react';</p>
<p>class UserCard extends React.Component {
   static propTypes = {
   user: PropTypes.shape({
   firstName: PropTypes.string.isRequired,
   lastName: PropTypes.string.isRequired,
   email: PropTypes.string.isRequired
   }).isRequired,
   isAdmin: PropTypes.boolean.isRequired
   };</p>
<p>defaultProps = {
   isAdmin: false
   };</p>
<p>render() {
   return ...
   }
   }
   ```</p>
<p>Если указаны значения в defaultProps, а компонента не получила значений от родителя для PropTypes с флагом isRequired,значение будет взято из defaultProps.</p>
<p>Список типов, которые доступны в PropTypes:</p>
<div class="highlight"><pre><span></span><span class="nx">MyComponent</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
<span class="c1">// Все PropTypes опциональны, и делают проверку только на соответствие типа</span>
<span class="nx">optionalArray</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">array</span><span class="p">,</span>
<span class="nx">optionalBool</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">bool</span><span class="p">,</span>
<span class="nx">optionalFunc</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">func</span><span class="p">,</span>
<span class="nx">optionalNumber</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span><span class="p">,</span>
<span class="nx">optionalObject</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">object</span><span class="p">,</span>
<span class="nx">optionalString</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
<span class="nx">optionalSymbol</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">symbol</span><span class="p">,</span>
<span class="c1">// Этот тип описывает любой элемент, который реакт может отрендерить в jsx</span>
<span class="nx">optionalNode</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">node</span><span class="p">,</span>
<span class="c1">// Реакт компонент</span>
<span class="nx">optionalElement</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span>
<span class="c1">// Также можно проверить, является ли тип экземпляром конкретного класса</span>
<span class="nx">optionalMessage</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">instanceOf</span><span class="p">(</span><span class="nx">Message</span><span class="p">),</span>
<span class="c1">// Позволяет проверить, что значение является одним из списка</span>
<span class="nx">optionalEnum</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">oneOf</span><span class="p">([</span><span class="s1">&#39;News&#39;</span><span class="p">,</span> <span class="s1">&#39;Photos&#39;</span><span class="p">]),</span>
<span class="c1">// Переменная может быть одной из перечисленных типов</span>
<span class="nx">optionalUnion</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">oneOfType</span><span class="p">([</span>
<span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
<span class="nx">PropTypes</span><span class="p">.</span><span class="nx">instanceOf</span><span class="p">(</span><span class="nx">Message</span><span class="p">)</span>
<span class="p">]),</span>
<span class="c1">// Переменная должна быть списком элементов с конкретным типом</span>
<span class="nx">optionalArrayOf</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">arrayOf</span><span class="p">(</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span><span class="p">),</span>
<span class="c1">// Объект должен содержать значения определенного типа</span>
<span class="nx">optionalObjectOf</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">objectOf</span><span class="p">(</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span><span class="p">),</span>
<span class="c1">// Проверка ключей объекта на соответствие типа</span>
<span class="nx">optionalObjectWithShape</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">shape</span><span class="p">({</span>
<span class="nx">color</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>
<span class="nx">fontSize</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span>
<span class="p">}),</span>
<span class="c1">// Пометить переменную, как обязательную</span>
<span class="nx">requiredFunc</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">func</span><span class="p">.</span><span class="nx">isRequired</span><span class="p">,</span>
<span class="c1">// Переменная может быть любого типа</span>
<span class="nx">requiredAny</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">any</span><span class="p">.</span><span class="nx">isRequired</span>
<span class="p">};</span>
</pre></div>


<h4>Порталы</h4>
<p>Когда нужно отрендерить компонент не в текущем месте дерева компонент, а отдельно, например, модальные окна, тултипы, попапы.
Такого рода элементы находятся в самом конце тега body, чтобы быть выше остальных элементов.</p>
<p>В случае порталов, нам необходимо вернуть ReactDOM.createPortal:</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">ModalWindow</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="k">return</span> <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">createPortal</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">domNode</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">App</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="k">return</span> <span class="p">(</span>
<span class="o">&lt;</span><span class="nx">ModalWindow</span> <span class="nx">domNode</span><span class="o">=</span><span class="p">{</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#modal&#39;</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">It</span> <span class="nx">is</span> <span class="nx">modal</span> <span class="nb">window</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="o">&lt;</span><span class="err">/ModalWindow&gt;</span>
<span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Первый аргумент -  компонент реакта;
Вторым — DOM объект, в котором реакт разместит этот компонент.</p>
<h4>Сcылки ref</h4>
<p>Существует несколько оправданных случаев использования ссылок ref:</p>
<ul>
<li>
<p>Управление фокусом, выделением текста или воспроизведением мультимедиа</p>
</li>
<li>
<p>Переключение необходимой анимации</p>
</li>
<li>
<p>Интеграция со сторонними DOM библиотеками</p>
</li>
</ul>
<p>Избегайте использования ссылок для всего, что может быть реализовано декларативным путем!</p>
<h4>React-роутинг (динамический роутинг) установка</h4>
<div class="highlight"><pre><span></span><span class="err">yarn add react-router-dom</span>
</pre></div>


<p>Также существует пакет react-router-native для работы на мобильных устройствах вместе с react-native, и react-router, который содержит общий код для этих библиотек.</p>
<p>Также существует пакет react-router-native для работы на мобильных устройствах вместе с react-native, и react-router, который содержит общий код для этих библиотек.</p>
<p>Обернуть корневой компонент с помощью BrowserRouter:
import {BrowserRouter} from 'react-router-dom';</p>
<div class="highlight"><pre><span></span><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
<span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/BrowserRouter&gt;,</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>


<p>Вот и реализация роутинга:</p>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Link</span><span class="p">,</span> <span class="nx">Route</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-router-dom&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">Home</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Home</span> <span class="nx">page</span><span class="o">&lt;</span><span class="err">/p&gt;;</span>
<span class="kr">const</span> <span class="nx">About</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">About</span> <span class="nx">page</span><span class="o">&lt;</span><span class="err">/p&gt;;</span>
<span class="kr">const</span> <span class="nx">Topics</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Topics</span> <span class="nx">page</span><span class="o">&lt;</span><span class="err">/p&gt;;</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;</span><span class="err">/Link&gt;&lt;/li&gt;</span>
<span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/about&quot;</span><span class="o">&gt;</span><span class="nx">About</span><span class="o">&lt;</span><span class="err">/Link&gt;&lt;/li&gt;</span>
<span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/topics&quot;</span><span class="o">&gt;</span><span class="nx">Topics</span><span class="o">&lt;</span><span class="err">/Link&gt;&lt;/li&gt;</span>
<span class="o">&lt;</span><span class="err">/ul&gt;</span>
<span class="o">&lt;</span><span class="nx">hr</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">exact</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/&quot;</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Home</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/about&quot;</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">About</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/topics&quot;</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Topics</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</pre></div>


<p>Для работы с переходами по страницам используется компонента Link, которая превращается в тег a, но реакт-роутер обрабатывает переход так, чтобы не было перезагрузки страницы. Роутер ловит событие клика на ссылку, отменят его, и делает push в window.history, браузер переходит на новый путь без перезагрузки страницы.</p>
<p>Компоненты, которые возвращает компонент Route получают в props дополнительный параметры:</p>
<div class="highlight"><pre><span></span><span class="nx">match</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">isExact</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="nx">params</span><span class="o">:</span> <span class="p">{},</span>
<span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/topics&#39;</span><span class="p">,</span>
<span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/topics&#39;</span>
<span class="p">}</span>

<span class="nx">location</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">hash</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nx">pathname</span><span class="o">:</span> <span class="s2">&quot;/topics&quot;</span><span class="p">,</span>
<span class="nx">search</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nx">state</span><span class="o">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>
<p>Match содержит данные по соответствию пути и роута и дополнительные параметры.</p>
</li>
<li>
<p>IsExact говорит о том, что путь в браузерной строке полностью соответствует роуту.</p>
</li>
<li>
<p>В params находятся дополнительные ключи, которые можно спарсить из роута, если путь использует регулярное выражение или /topics/:id.</p>
</li>
<li>
<p>Path — это путь с которым проводили сравнение. Полезен для создания вложенных Route.</p>
</li>
<li>
<p>Url — это полный путь, полезен для создания вложенных Link.</p>
</li>
</ul>
<p>History — это объект, который использует библиотеку history (<a href="https://github.com/ReactTraining/history">https://github.com/ReactTraining/history</a>) для удобной работы с сессией и историей переходов. Также реакт-роутер может работать с якорными переходами, когда url меняется не целиком, а только после якоря #</p>
<ul>
<li>
<p>length — длина истории, количество location в стеке истории.</p>
</li>
<li>
<p>action — текущее действие, выполненное с историей: PUSH, REPLACE или POP. Соответствует переходу на страницу, замене текущей страницы и переходу назад.</p>
</li>
<li>
<p>location — текущая локация, соответствует location, переданному отдельно через prop.</p>
</li>
<li>
<p>push — функция, с помощью которой происходит переход по истории.</p>
</li>
<li>
<p>replace — функция для замены текущего пути.</p>
</li>
<li>
<p>go(n) — функция для указания номера пути в стеке истории путей.</p>
</li>
<li>
<p>goBack — функция для перехода назад (go(-1)).</p>
</li>
<li>
<p>goForward — функция для перехода вперед(go(1)).</p>
</li>
<li>
<p>block(promt) — функция для остановки перехода пользователя, которая вызовет окно confirm с просьбой не покидать страницу ("Вы уверены что хотите закрыть страницу?").</p>
</li>
</ul>
<h4>компонент Switch и редиректы</h4>
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">Switch</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/&quot;</span> <span class="nx">exact</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Home</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">Redirect</span> <span class="nx">from</span><span class="o">=</span><span class="s2">&quot;/old-match&quot;</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/will-match&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/will-match&quot;</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">WillMatch</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">NoMatch</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/Switch&gt;;</span>
</pre></div>


<p>Компонент Switch последовательно смотрит детей и сравнивает их path и флаги exact и strict.  </p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/2017/10/04/postgresql-table-space/" rel="bookmark"
                           title="Permalink to PostgreSQL - табличные пространства">PostgreSQL - табличные пространства</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Wed 04 October 2017</span>
<span>| tags: <a href="/tag/administrirovanie.html">администрирование</a><a href="/tag/bd.html">бд</a><a href="/tag/postgresql.html">PostgreSQL</a><a href="/tag/db.html">db</a></span>
</footer><!-- /.post-info -->                <p><strong>Табличные пространства</strong> - это средство для физической организации данных</p>
<p>Табл. пр-ва могут быть использованы несколькими БД кластера.</p>
<p>каждая БД имеет табличное пространство "по умолчанию."</p>
<p>Табл. пр-во <em>pg_global</em> находится $PGDATA/global/  - общие объекты кластера
Табл. пр-во <em>pg_default</em> находится $PGDATA/base/dboid  - табл. пр-во по умолчанию</p>
<p><em>select * from pg_tablespace;</em> - список табличных пространств
или …</p>
                <a class="readmore" href="/2017/10/04/postgresql-table-space/">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/2017/09/18/save-geo-data-to-db/" rel="bookmark"
                           title="Permalink to Хранение географических координат в Базах Данных">Хранение географических координат в Базах Данных</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Mon 18 September 2017</span>
<span>| tags: <a href="/tag/bd.html">бд</a><a href="/tag/geografichekie-koordinaty.html">географичекие координаты</a><a href="/tag/dolgota.html">долгота</a><a href="/tag/shirota.html">широта</a><a href="/tag/postgis.html">postgis</a><a href="/tag/postgresql.html">PostgreSQL</a><a href="/tag/db.html">db</a></span>
</footer><!-- /.post-info -->                <h2>Полезные ссылки:</h2>
<ul>
<li><a href="https://habrahabr.ru/post/228023/">Работа с геолокациями в режиме highload</a></li>
<li><a href="https://live.osgeo.org/ru/quickstart/postgis_quickstart.html">Введение в PostGIS</a></li>
<li><a href="http://postgis.net/install/">Установка PostGIS</a></li>
<li><a href="http://postgis.net/docs/manual-2.4/">Документация по PostGIS</a></li>
</ul>
<h2>Установка PostGIS</h2>
<p>The following will install postgresql 9.6, PostGIS 2.3, PGAdmin4, pgRouting 2.3 and additional supplied modules including the adminpack extension:</p>
<div class="highlight"><pre><span></span>sudo apt-get install postgresql-9.6
sudo apt-get install postgresql-9.6-postgis-2 …</pre></div>
                <a class="readmore" href="/2017/09/18/save-geo-data-to-db/">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/oILnur">Twitter</a></li>
                            <li><a href="mailto: ilnursoft@gmail.com">Email</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>