<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <meta name="yandex-verification" content="f7918c520c4b54dd" />
        <title>11. Решение проблемы bootloop Asus Zenfone 2 ( В ПРОЦЕССЕ)</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a href="https://github.com/kaefik">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="/">Общественная записная книжка  <strong>следы для себя и потомков</strong></a></h1>
                <nav><ul>
                </ul>
<form id="search" action"#" onsubmit="javascript:window.open('https://duckduckgo.com/?q='+document.getElementById('keywords').value+'+site:www.kaefik.ru');">
                        <input id="keywords" type="text" />
                    </form>
                </nav>
<div id="submenu">
                    <ul>
                            <li><a href="/category/anime.html">anime</a></li>
                            <li><a href="/category/arduino.html">arduino</a></li>
                            <li><a href="/category/bios.html">bios</a></li>
                            <li><a href="/category/blogger.html">blogger</a></li>
                            <li><a href="/category/c.html">c#</a></li>
                            <li><a href="/category/chromeos.html">chromeos</a></li>
                            <li><a href="/category/clojure.html">clojure</a></li>
                            <li><a href="/category/design.html">design</a></li>
                            <li><a href="/category/docker.html">docker</a></li>
                            <li><a href="/category/emacs.html">emacs</a></li>
                            <li><a href="/category/english.html">english</a></li>
                            <li><a href="/category/familytree.html">familytree</a></li>
                            <li><a href="/category/freepbx.html">freepbx</a></li>
                            <li><a href="/category/game.html">game</a></li>
                            <li><a href="/category/git.html">git</a></li>
                            <li><a href="/category/github-actions.html">github-actions</a></li>
                            <li><a href="/category/go.html">go</a></li>
                            <li><a href="/category/hackintosh.html">hackintosh</a></li>
                            <li><a href="/category/hobby.html">hobby</a></li>
                            <li><a href="/category/internet.html">internet</a></li>
                            <li><a href="/category/java.html">java</a></li>
                            <li><a href="/category/javascript.html">javascript</a></li>
                            <li><a href="/category/lego.html">lego</a></li>
                            <li><a href="/category/linux.html">linux</a></li>
                            <li><a href="/category/lua.html">lua</a></li>
                            <li><a href="/category/machine_learning.html">machine_learning</a></li>
                            <li><a href="/category/main.html">main</a></li>
                            <li><a href="/category/markdown.html">markdown</a></li>
                            <li><a href="/category/miband.html">miband</a></li>
                            <li><a href="/category/minecraft.html">minecraft</a></li>
                            <li><a href="/category/miui.html">miui</a></li>
                            <li><a href="/category/money.html">money</a></li>
                            <li><a href="/category/mongodb.html">mongodb</a></li>
                            <li><a href="/category/mouse.html">mouse</a></li>
                            <li><a href="/category/nano.html">nano</a></li>
                            <li><a href="/category/network.html">network</a></li>
                            <li><a href="/category/openstreetmap.html">openstreetmap</a></li>
                            <li><a href="/category/os.html">os</a></li>
                            <li><a href="/category/otkrytye-dannye.html">открытые данные</a></li>
                            <li><a href="/category/postgis.html">postgis</a></li>
                            <li><a href="/category/postgresql.html">PostgreSQL</a></li>
                            <li><a href="/category/powershell.html">powershell</a></li>
                            <li><a href="/category/programming.html">programming</a></li>
                            <li><a href="/category/projects.html">projects</a></li>
                            <li><a href="/category/python.html">python</a></li>
                            <li><a href="/category/radio.html">radio</a></li>
                            <li><a href="/category/rest-api.html">rest-api</a></li>
                            <li><a href="/category/rust.html">rust</a></li>
                            <li class="active"><a href="/category/sailfish.html">sailfish</a></li>
                            <li><a href="/category/security.html">security</a></li>
                            <li><a href="/category/selenium.html">selenium</a></li>
                            <li><a href="/category/shell.html">shell</a></li>
                            <li><a href="/category/swift.html">swift</a></li>
                            <li><a href="/category/tatar.html">tatar</a></li>
                            <li><a href="/category/ubuntu.html">ubuntu</a></li>
                            <li><a href="/category/upwork.html">upwork</a></li>
                            <li><a href="/category/video.html">video</a></li>
                            <li><a href="/category/vim.html">vim</a></li>
                            <li><a href="/category/voice-assistant.html">voice-assistant</a></li>
                            <li><a href="/category/vpn.html">vpn</a></li>
                            <li><a href="/category/vscode.html">vscode</a></li>
                            <li><a href="/category/web.html">web</a></li>
                            <li><a href="/category/wifi.html">wifi</a></li>
                            <li><a href="/category/windows.html">windows</a></li>
                    </ul>
                <div>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/01/19/11-bootloop-asus-zenfone-2/" rel="bookmark"
           title="Permalink to 11. Решение проблемы bootloop Asus Zenfone 2 ( В ПРОЦЕССЕ)">11. Решение проблемы bootloop Asus Zenfone 2 ( В ПРОЦЕССЕ)</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>Thu 19 January 2017</span>
<span>| tags: <a href="/tag/asus.html">asus</a><a href="/tag/porting.html">porting</a><a href="/tag/sailfish.html">sailfish</a><a href="/tag/z00l.html">z00l</a></span>
</footer><!-- /.post-info -->      <p><strong>!!! на 13.02.2017 года проблема с bootloop не решена.</strong></p>
<h2>ЧИТАЕМ ЛОГИ НЕЗАГРУЖАЮЩЕГОСЯ УСТРОЙСТВА</h2>
<p>источник: <a href="http://neochapay.ru/blogs/zapiski-utkonosa-programmista/sailfish-os-hardware-adaptation-developm-74.html">http://neochapay.ru/blogs/zapiski-utkonosa-programmista/sailfish-os-hardware-adaptation-developm-74.html</a> </p>
<p>Итак,есть устройство...и естественно оно не загружается...ну так бывает при портировании. Как добраться до логов?</p>
<p>​           1.  Правим настройки журнала systemd</p>
<p>​          Заходим в рековери, кастомное </p>
<div class="highlight"><pre><span></span>adb<span class="w"> </span>shell
vi<span class="w"> </span>/data/.stowaways/sailfishos/etc/systemd/journald.conf
</pre></div>


<p>The systemd journal is persistent over reboots in devel branch - otherwise edit /etc/systemd/journald.conf and set</p>
<div class="highlight"><pre><span></span> Storage=persistent
</pre></div>


<p>Preventing journald from throttling logging from a verbose process - edit /etc/systemd/journald.conf and set</p>
<div class="highlight"><pre><span></span> RateLimitBurst=9999
 RateLimitInterval=5s
</pre></div>


<div class="highlight"><pre><span></span>adb<span class="w"> </span>shell
su
mount<span class="w"> </span>-o<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>/dev<span class="w"> </span>/data/.stowaways/sailfishos/dev<span class="p">;</span>mount<span class="w"> </span>-o<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>/proc<span class="w"> </span>/data/.stowaways/sailfishos/proc<span class="p">;</span>mount<span class="w"> </span>-o<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>/sys<span class="w"> </span>/data/.stowaways/sailfishos/sys<span class="p">;</span>chroot<span class="w"> </span>/data/.stowaways/sailfishos/<span class="w"> </span>/bin/su<span class="w"> </span>-
</pre></div>


<ol>
<li>
<p>смотрим наш журнал:                </p>
<p><code>journalctl -b</code></p>
<p><strong>Решение</strong></p>
<ul>
<li>device/asus/msm8916-common/BoardConfigCommon.mk</li>
</ul>
</li>
</ol>
<p>добавить в строку</p>
<div class="highlight"><pre><span></span><span class="nv">BOARD_KERNEL_CMDLINE</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">console</span><span class="o">=</span><span class="nv">ttyHSL0</span><span class="p">,</span><span class="mi">115200</span><span class="p">,</span><span class="nv">n8</span><span class="w"> </span><span class="ow">and</span><span class="nv">roidboot</span><span class="o">.</span><span class="nv">console</span><span class="o">=</span><span class="nv">ttyHSL0</span><span class="w"> </span><span class="ow">and</span><span class="nv">roidboot</span><span class="o">.</span><span class="nv">hardware</span><span class="o">=</span><span class="nv">qcom</span><span class="w"> </span><span class="nv">ehci</span><span class="o">-</span><span class="nv">hcd</span><span class="o">.</span><span class="nv">park</span><span class="o">=</span><span class="mi">3</span><span class="w"> </span><span class="ow">and</span><span class="nv">roidboot</span><span class="o">.</span><span class="nv">bootdevice</span><span class="o">=</span><span class="mi">7824900</span><span class="o">.</span><span class="nv">sdhci</span><span class="w"> </span><span class="nv">lpm_levels</span><span class="o">.</span><span class="nv">sleep_disabled</span><span class="o">=</span><span class="mi">1</span>
</pre></div>


<p>в конце selinux=0</p>
<ul>
<li><strong>init.environ.rc</strong></li>
</ul>
<p><code>bash
  export LD_LIBRARY_PATH /vendor/lib64:/system/lib64:/usr/libexec/droid-hybris/lib-dev-alog:/vendor/lib:/system/lib</code></p>
<ul>
<li><strong>Сделал архив с образом rootfs и hybris-boot.img</strong>  -&gt; <a href="https://yadi.sk/d/U9KDD0_f3AecSh">скачать альфу версию прошивки можно вот тут</a>. Эта прошивка отправляет устройство в bootloop.</li>
</ul>
<hr>
<p>вот журнал загрузки устройства: <a href="https://gist.github.com/kaefik/2cc70a25a2aecb64b01fcc7aae66efb6">https://gist.github.com/kaefik/2cc70a25a2aecb64b01fcc7aae66efb6</a></p>
<p>​                 1)  попробуем решить ошибку:           </p>
<div class="highlight"><pre><span></span><span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">platform</span> <span class="s s-Atom">b018000</span><span class="p">.</span><span class="s s-Atom">regulator</span><span class="p">:</span> <span class="nv">Driver</span> <span class="s s-Atom">qcom</span><span class="p">,</span><span class="s s-Atom">cpr</span><span class="o">-</span><span class="s s-Atom">regulator</span> <span class="s s-Atom">requests</span> <span class="s s-Atom">probe</span> <span class="s s-Atom">deferral</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b6000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">probing</span> <span class="s s-Atom">driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b6000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="s s-Atom">on</span> <span class="nf">clk_get</span><span class="p">(</span><span class="s s-Atom">core_clk</span><span class="p">)</span><span class="o">:-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b6000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="nf">probe</span><span class="p">()</span> <span class="s s-Atom">failed</span> <span class="s s-Atom">with</span> <span class="s s-Atom">err</span><span class="p">:</span><span class="o">-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">platform</span> <span class="mi">78</span><span class="s s-Atom">b6000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="nv">Driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="s s-Atom">requests</span> <span class="s s-Atom">probe</span> <span class="s s-Atom">deferral</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b9000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">probing</span> <span class="s s-Atom">driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b9000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="s s-Atom">on</span> <span class="nf">clk_get</span><span class="p">(</span><span class="s s-Atom">core_clk</span><span class="p">)</span><span class="o">:-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b9000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="nf">probe</span><span class="p">()</span> <span class="s s-Atom">failed</span> <span class="s s-Atom">with</span> <span class="s s-Atom">err</span><span class="p">:</span><span class="o">-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">platform</span> <span class="mi">78</span><span class="s s-Atom">b9000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="nv">Driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="s s-Atom">requests</span> <span class="s s-Atom">probe</span> <span class="s s-Atom">deferral</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">ba000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">probing</span> <span class="s s-Atom">driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">ba000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="s s-Atom">on</span> <span class="nf">clk_get</span><span class="p">(</span><span class="s s-Atom">core_clk</span><span class="p">)</span><span class="o">:-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">ba000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="nf">probe</span><span class="p">()</span> <span class="s s-Atom">failed</span> <span class="s s-Atom">with</span> <span class="s s-Atom">err</span><span class="p">:</span><span class="o">-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">platform</span> <span class="mi">78</span><span class="s s-Atom">ba000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="nv">Driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="s s-Atom">requests</span> <span class="s s-Atom">probe</span> <span class="s s-Atom">deferral</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b8000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">probing</span> <span class="s s-Atom">driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b8000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="s s-Atom">on</span> <span class="nf">clk_get</span><span class="p">(</span><span class="s s-Atom">core_clk</span><span class="p">)</span><span class="o">:-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="mi">78</span><span class="s s-Atom">b8000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="s s-Atom">error</span> <span class="nf">probe</span><span class="p">()</span> <span class="s s-Atom">failed</span> <span class="s s-Atom">with</span> <span class="s s-Atom">err</span><span class="p">:</span><span class="o">-</span><span class="mi">517</span>
<span class="nv">Jun</span> <span class="mi">02</span> <span class="mi">19</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">59</span> <span class="nv">Sailfish</span> <span class="s s-Atom">kernel</span><span class="p">:</span> <span class="s s-Atom">platform</span> <span class="mi">78</span><span class="s s-Atom">b8000</span><span class="p">.</span><span class="s s-Atom">i2c</span><span class="o">:</span> <span class="nv">Driver</span> <span class="s s-Atom">i2c</span><span class="o">-</span><span class="s s-Atom">msm</span><span class="o">-</span><span class="s s-Atom">v2</span> <span class="s s-Atom">requests</span> <span class="s s-Atom">probe</span> <span class="s s-Atom">deferral</span>
</pre></div>


<p>​                 Решение:
​                </p>
<p>источник: <a href="http://stackoverflow.com/questions/30166717/how-to-fix-error-on-clk-getcore-clk-during-probing-driver-i2c-msm-v2">http://stackoverflow.com/questions/30166717/how-to-fix-error-on-clk-getcore-clk-during-probing-driver-i2c-msm-v2</a></p>
<p>This problem relates to the driver probe order. Because clk inits after probing i2c, so that i2c failed to get clk.This problem can be solved by changing Makefile (in /drivers). Just move clk upto a higher position than i2c.I checked it this way and now the error message disappears :)</p>
<p>kernel/asus/msm8916/drivers/Makefile</p>
<hr>
<p><strong>PS2.</strong> из <a href="http://piratepad.net/hadk-faq-v2">http://piratepad.net/hadk-faq-v2</a> строка 73-87</p>
<ul>
<li><strong>изменение в файле hybris/droid-configs/droid-configs-device/sparse/lib/udev/rules.d/998-droid-system.rules</strong> </li>
</ul>
<div class="highlight"><pre><span></span><span class="n">SIM</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">detected</span><span class="p">:</span>
<span class="n">This</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">causes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bootloop</span>
<span class="n">Cellular</span><span class="w"> </span><span class="n">Modem</span><span class="w"> </span><span class="n">bringup</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">HADK</span><span class="w"> </span><span class="n">v1</span><span class="o">.</span><span class="mf">1.1</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="mf">13.3</span>
<span class="n">Additional</span><span class="w"> </span><span class="n">checks</span><span class="p">:</span>
<span class="n">Replicate</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">block</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">Android</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">closely</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">rild</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">modem</span><span class="w"> </span><span class="n">partition</span><span class="p">)</span>
<span class="n">Run</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">lR</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">block</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">CM</span>
<span class="n">Run</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">lR</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">block</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">Sailfish</span><span class="w"> </span><span class="n">OS</span>
<span class="n">diff</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">WIP</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">android</span><span class="s1">&#39;s toolbox ls might need more parameters to produce a comparable output)</span>
<span class="n">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">differences</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">udev</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">block</span><span class="w"> </span><span class="n">structure</span>
<span class="n">For</span><span class="w">    </span><span class="n">devices</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">block</span><span class="o">/</span><span class="n">platform</span><span class="o">/</span><span class="n">msm_sdcc</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="n">name</span><span class="o">/</span><span class="w"> </span><span class="n">paths</span><span class="w">  </span><span class="p">(</span><span class="n">msm_sdcc</span><span class="o">.</span><span class="mi">1</span><span class="w">   </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">different</span><span class="p">)</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">$</span><span class="n">ANDROID_ROOT</span><span class="o">/</span><span class="n">rpm</span><span class="o">/</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">paths</span><span class="w">  </span><span class="ow">and</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">with</span><span class="w">   </span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">probably</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="p">(</span><span class="n">but</span><span class="w"> </span><span class="n">still</span><span class="w">  </span><span class="n">paste</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">diff</span><span class="w"> </span><span class="n">to</span><span class="w">   </span><span class="n">the</span><span class="w"> </span><span class="n">IRC</span><span class="w"> </span><span class="n">channel</span><span class="p">):</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mer</span><span class="o">-</span><span class="n">hybris</span><span class="o">-</span><span class="n">kis3</span><span class="o">/</span><span class="n">droid</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">kis3</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="k">master</span><span class="o">/</span><span class="n">sparse</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">udev</span><span class="o">/</span><span class="n">platform</span><span class="o">-</span><span class="n">device</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mer</span><span class="o">-</span><span class="n">hybris</span><span class="o">-</span><span class="n">kis3</span><span class="o">/</span><span class="n">droid</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">kis3</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="k">master</span><span class="o">/</span><span class="n">sparse</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">udev</span><span class="o">/</span><span class="n">rules</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="mi">998</span><span class="o">-</span><span class="n">droid</span><span class="o">-</span><span class="n">system</span><span class="o">.</span><span class="n">rules</span>
<span class="n">Some</span><span class="w">    </span><span class="n">devices</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">block</span><span class="o">/</span><span class="n">bootdevice</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="n">name</span><span class="o">/</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">block</span><span class="w"> </span><span class="n">structure</span><span class="w">  </span><span class="ow">in</span><span class="w">   </span><span class="n">CM</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">of</span><span class="w">  </span><span class="n">the</span><span class="w">   </span><span class="mi">998</span><span class="o">-</span><span class="n">droid</span><span class="o">-</span><span class="n">system</span><span class="o">.</span><span class="n">rules</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">link</span><span class="p">:</span>
<span class="n">ENV</span><span class="p">{</span><span class="n">ID_PART_ENTRY_SCHEME</span><span class="p">}</span><span class="o">==</span><span class="s2">&quot;gpt&quot;</span><span class="p">,</span><span class="w">    </span><span class="n">ENV</span><span class="p">{</span><span class="n">ID_PART_ENTRY_NAME</span><span class="p">}</span><span class="o">==</span><span class="s2">&quot;?*&quot;</span><span class="p">,</span><span class="w">  </span><span class="n">IMPORT</span><span class="p">{</span><span class="n">program</span><span class="p">}</span><span class="o">=</span><span class="s2">&quot;/bin/sh    /lib/udev/platform-device $env{DEVPATH}&quot;</span><span class="p">,</span><span class="w">     </span><span class="n">SYMLINK</span><span class="o">+=</span><span class="s2">&quot;block/bootdevice/by-name/$env{ID_PART_ENTRY_NAME}&quot;</span>
<span class="n">If</span><span class="w">    </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">logcat</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">journal</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">suggesting</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">RIL</span><span class="o">/</span><span class="n">ofono</span><span class="w">    </span><span class="n">can</span><span class="s1">&#39;t power the modem on and you have a qcom chipset, have a look in    your init.qcom.rc for lines that power it on when the boot animation    (bootanim) stops. If you have those, try this (paths may need    correcting): https://github.com/stephgosling/android_device_htc_m7-common/commit/9f4abdca65356090e6dd6f0356c5cf4a1870aa5f (note the typo there in the chown line!)</span>
</pre></div>


<p>Далее переходим к пункту</p>
<div class="highlight"><pre><span></span>            8. Packaging droid-hal-device
</pre></div>


<ul>
<li>проиcходит постоянная попытка загрузки booster for Qt5 см <a href="https://gist.github.com/kaefik/2b29fdea0120530dcca9bd737dc2ba17">https://gist.github.com/kaefik/2b29fdea0120530dcca9bd737dc2ba17</a> </li>
</ul>
<p>нужен патч для ядра:
<a href="https://github.com/zhxt/android_kernel_xiaomi_msm8996/commit/731e1017a8b3f2f15b4b5766adf1f3485c395e03">https://github.com/zhxt/android_kernel_xiaomi_msm8996/commit/731e1017a8b3f2f15b4b5766adf1f3485c395e03</a> в файле droid/kernel/asus/msm8916/fs/proc/<a href="https://github.com/zhxt/android_kernel_xiaomi_msm8996/commit/731e1017a8b3f2f15b4b5766adf1f3485c395e03#diff-c586b38bd084769f10a0e4d11db4abfd">base.c</a></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/oILnur">Twitter</a></li>
                            <li><a href="mailto: ilnursoft@gmail.com">Email</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>