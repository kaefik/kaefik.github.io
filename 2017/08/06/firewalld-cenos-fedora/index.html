<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>Настройка брэндмауэра firewalld (CenOS, Fedora)</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a href="https://github.com/kaefik">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="/">Общественная записная книжка  <strong>следы для себя и потомков</strong></a></h1>
                <nav><ul>
                </ul>
<form id="search" action"#" onsubmit="javascript:window.open('https://duckduckgo.com/?q='+document.getElementById('keywords').value+'+site:');">
                        <input id="keywords" type="text" />
                    </form>
                </nav>
<div id="submenu">
                    <ul>
                            <li><a href="/category/anime.html">anime</a></li>
                            <li><a href="/category/arduino.html">arduino</a></li>
                            <li><a href="/category/bios.html">bios</a></li>
                            <li><a href="/category/blogger.html">blogger</a></li>
                            <li><a href="/category/chromeos.html">chromeos</a></li>
                            <li><a href="/category/clojure.html">clojure</a></li>
                            <li><a href="/category/design.html">design</a></li>
                            <li><a href="/category/docker.html">docker</a></li>
                            <li><a href="/category/game.html">game</a></li>
                            <li><a href="/category/git.html">git</a></li>
                            <li><a href="/category/go.html">go</a></li>
                            <li><a href="/category/hackintosh.html">hackintosh</a></li>
                            <li><a href="/category/internet.html">internet</a></li>
                            <li><a href="/category/javascript.html">javascript</a></li>
                            <li><a href="/category/lego.html">lego</a></li>
                            <li class="active"><a href="/category/linux.html">linux</a></li>
                            <li><a href="/category/lua.html">lua</a></li>
                            <li><a href="/category/machine_learning.html">machine_learning</a></li>
                            <li><a href="/category/main.html">main</a></li>
                            <li><a href="/category/markdown.html">markdown</a></li>
                            <li><a href="/category/miband.html">miband</a></li>
                            <li><a href="/category/minecraft.html">minecraft</a></li>
                            <li><a href="/category/miui.html">miui</a></li>
                            <li><a href="/category/money.html">money</a></li>
                            <li><a href="/category/mongodb.html">mongodb</a></li>
                            <li><a href="/category/mouse.html">mouse</a></li>
                            <li><a href="/category/network.html">network</a></li>
                            <li><a href="/category/openstreetmap.html">openstreetmap</a></li>
                            <li><a href="/category/os.html">os</a></li>
                            <li><a href="/category/otkrytye-dannye.html">открытые данные</a></li>
                            <li><a href="/category/postgis.html">postgis</a></li>
                            <li><a href="/category/postgresql.html">PostgreSQL</a></li>
                            <li><a href="/category/powershell.html">powershell</a></li>
                            <li><a href="/category/programming.html">programming</a></li>
                            <li><a href="/category/projects.html">projects</a></li>
                            <li><a href="/category/python.html">python</a></li>
                            <li><a href="/category/radio.html">radio</a></li>
                            <li><a href="/category/rest-api.html">rest-api</a></li>
                            <li><a href="/category/rust.html">rust</a></li>
                            <li><a href="/category/sailfish.html">sailfish</a></li>
                            <li><a href="/category/security.html">security</a></li>
                            <li><a href="/category/selenium.html">selenium</a></li>
                            <li><a href="/category/shell.html">shell</a></li>
                            <li><a href="/category/swift.html">swift</a></li>
                            <li><a href="/category/tatar.html">tatar</a></li>
                            <li><a href="/category/video.html">video</a></li>
                            <li><a href="/category/voice-assistant.html">voice-assistant</a></li>
                            <li><a href="/category/vscode.html">vscode</a></li>
                            <li><a href="/category/web.html">web</a></li>
                            <li><a href="/category/windows.html">windows</a></li>
                    </ul>
                <div>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/08/06/firewalld-cenos-fedora/" rel="bookmark"
           title="Permalink to Настройка брэндмауэра firewalld (CenOS, Fedora)">Настройка брэндмауэра firewalld (CenOS, Fedora)</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>Sun 06 August 2017</span>
<span>| tags: <a href="/tag/centos.html">centos</a><a href="/tag/fedora.html">fedora</a><a href="/tag/firewall.html">firewall</a><a href="/tag/linux.html">linux</a><a href="/tag/security.html">security</a></span>
</footer><!-- /.post-info -->      <h2>Полезные ссылки</h2>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-using-firewalld-on-centos-7">How To Set Up a Firewall Using FirewallD on CentOS 7</a></li>
</ul>
<h2>Запущен ли firewall</h2>
<div class="highlight"><pre><span></span><span class="err">sudo systemctl start firewalld.service</span>
</pre></div>


<p>​     или</p>
<div class="highlight"><pre><span></span><span class="err">firewall-cmd --state</span>
</pre></div>


<p>Информация о текущих настройках firewall</p>
<ul>
<li>We can see which zone is currently selected as the default by typing:</li>
</ul>
<div class="highlight"><pre><span></span>firewall-cmd --get-default-zone
</pre></div>


<ul>
<li>Since we haven't given firewalld any commands to deviate from the default zone, and none of our interfaces are configured to bind to another zone, that zone will also be the only "active" zone (the zone that is controlling the traffic for our interfaces). We can verify that by typing:</li>
</ul>
<div class="highlight"><pre><span></span>firewall-cmd --get-active-zones
</pre></div>


<ul>
<li>How do we know what rules are associated with the public zone though? We can print out the default zone's configuration by typing:</li>
</ul>
<div class="highlight"><pre><span></span>firewall-cmd --list-all
</pre></div>


<ul>
<li>To get a list of the available zones, type:</li>
</ul>
<div class="highlight"><pre><span></span>firewall-cmd --get-zones
</pre></div>


<ul>
<li>Changing the Zone of an Interface for the Current Session</li>
</ul>
<p>You can transition an interface between zones during a session by using the --zone= parameter in combination with the --change-interface= parameter. As with all commands that modify the firewall, you will need to use sudo.</p>
<p>For instance, we can transition our eth0 interface to the "home" zone by typing this:         </p>
<div class="highlight"><pre><span></span>sudo firewall-cmd --zone<span class="o">=</span>home --change-interface<span class="o">=</span>eth0
</pre></div>


<ul>
<li>изменить зону для интерфейса на постоянной основе</li>
</ul>
<p>/etc/sysconfig/network-scripts directory with files of the format ifcfg-interface.</p>
<p>​      ZONE= variable to the zone you wish to associate with the interface.</p>
<h2>Настройка правила для приложений</h2>
<ul>
<li>Получение список всех сервисов</li>
</ul>
<div class="highlight"><pre><span></span>firewall-cmd --get-services
</pre></div>


<p>You can get more details about each of these services by looking at their associated .xml file within the /usr/lib/firewalld/services directory. For instance, the SSH service is defined like this:</p>
<p>​                /usr/lib/firewalld/services/ssh.xml</p>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;service&gt;</span>
<span class="nt">&lt;short&gt;</span>SSH<span class="nt">&lt;/short&gt;</span>
<span class="nt">&lt;description&gt;</span>
</pre></div>


<p>Secure Shell (SSH) is a protocol for logging into and executing commands on remote machines. It provides secure encrypted communications. If you plan on accessing your machine remotely via SSH over a firewalled interface, enable this option. You need the openssh-server package installed for this option to be useful.</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;port</span> <span class="na">protocol=</span><span class="s">&quot;tcp&quot;</span> <span class="na">port=</span><span class="s">&quot;22&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>


<ul>
<li>For instance, if we are running a web server serving conventional HTTP traffic, we can allow this traffic for interfaces in our "public" zone for this session by typing:           </li>
</ul>
<div class="highlight"><pre><span></span>sudo firewall-cmd --zone<span class="o">=</span>public --add-service<span class="o">=</span>http
</pre></div>


<p>You can leave out the --zone= if you wish to modify the default zone. We can verify the operation was successful by using the --list-all or --list-services operations:</p>
<div class="highlight"><pre><span></span>firewall-cmd --zone<span class="o">=</span>public --list-services
</pre></div>


<p>We can make our "public" zone change permanent by typing:</p>
<div class="highlight"><pre><span></span>sudo firewall-cmd --zone<span class="o">=</span>public --permanent --add-service<span class="o">=</span>http
</pre></div>


<p>You can verify that this was successful by adding the --permanent flag to the --list-services operation. You need to use sudo for any --permanent operations:</p>
<div class="highlight"><pre><span></span>sudo firewall-cmd --zone<span class="o">=</span>public --permanent --list-services
</pre></div>


<ul>
<li>Открыть порт для приложения</li>
</ul>
<p>if our application runs on port 5000 and uses TCP, we could add this to the "public" zone for this session using the --add-port= parameter. Protocols can be either tcp or udp:             </p>
<div class="highlight"><pre><span></span>sudo firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span><span class="m">5000</span>/tcp    
</pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/oILnur">Twitter</a></li>
                            <li><a href="mailto: ilnursoft@gmail.com">Email</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>