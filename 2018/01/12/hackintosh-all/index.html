<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>Хакинтоши наше всё!</title>
        <link rel="stylesheet" href="www.kaefik.ru/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a href="https://github.com/kaefik">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="www.kaefik.ru/">Общественная записная книжка  <strong>следы для себя и потомков</strong></a></h1>
                <nav><ul>
                </ul>
<form id="search" action"#" onsubmit="javascript:window.open('https://duckduckgo.com/?q='+document.getElementById('keywords').value+'+site:www.kaefik.ru');">
                        <input id="keywords" type="text" />
                    </form>
                </nav>
<div id="submenu">
                    <ul>
                            <li><a href="www.kaefik.ru/category/anime.html">anime</a></li>
                            <li><a href="www.kaefik.ru/category/arduino.html">arduino</a></li>
                            <li><a href="www.kaefik.ru/category/bios.html">bios</a></li>
                            <li><a href="www.kaefik.ru/category/blogger.html">blogger</a></li>
                            <li><a href="www.kaefik.ru/category/chromeos.html">chromeos</a></li>
                            <li><a href="www.kaefik.ru/category/clojure.html">clojure</a></li>
                            <li><a href="www.kaefik.ru/category/design.html">design</a></li>
                            <li><a href="www.kaefik.ru/category/docker.html">docker</a></li>
                            <li><a href="www.kaefik.ru/category/game.html">game</a></li>
                            <li><a href="www.kaefik.ru/category/git.html">git</a></li>
                            <li><a href="www.kaefik.ru/category/go.html">go</a></li>
                            <li class="active"><a href="www.kaefik.ru/category/hackintosh.html">hackintosh</a></li>
                            <li><a href="www.kaefik.ru/category/internet.html">internet</a></li>
                            <li><a href="www.kaefik.ru/category/javascript.html">javascript</a></li>
                            <li><a href="www.kaefik.ru/category/lego.html">lego</a></li>
                            <li><a href="www.kaefik.ru/category/linux.html">linux</a></li>
                            <li><a href="www.kaefik.ru/category/lua.html">lua</a></li>
                            <li><a href="www.kaefik.ru/category/machine_learning.html">machine_learning</a></li>
                            <li><a href="www.kaefik.ru/category/main.html">main</a></li>
                            <li><a href="www.kaefik.ru/category/markdown.html">markdown</a></li>
                            <li><a href="www.kaefik.ru/category/miband.html">miband</a></li>
                            <li><a href="www.kaefik.ru/category/minecraft.html">minecraft</a></li>
                            <li><a href="www.kaefik.ru/category/miui.html">miui</a></li>
                            <li><a href="www.kaefik.ru/category/money.html">money</a></li>
                            <li><a href="www.kaefik.ru/category/mongodb.html">mongodb</a></li>
                            <li><a href="www.kaefik.ru/category/mouse.html">mouse</a></li>
                            <li><a href="www.kaefik.ru/category/network.html">network</a></li>
                            <li><a href="www.kaefik.ru/category/openstreetmap.html">openstreetmap</a></li>
                            <li><a href="www.kaefik.ru/category/os.html">os</a></li>
                            <li><a href="www.kaefik.ru/category/otkrytye-dannye.html">открытые данные</a></li>
                            <li><a href="www.kaefik.ru/category/postgis.html">postgis</a></li>
                            <li><a href="www.kaefik.ru/category/postgresql.html">PostgreSQL</a></li>
                            <li><a href="www.kaefik.ru/category/powershell.html">powershell</a></li>
                            <li><a href="www.kaefik.ru/category/programming.html">programming</a></li>
                            <li><a href="www.kaefik.ru/category/projects.html">projects</a></li>
                            <li><a href="www.kaefik.ru/category/python.html">python</a></li>
                            <li><a href="www.kaefik.ru/category/radio.html">radio</a></li>
                            <li><a href="www.kaefik.ru/category/rest-api.html">rest-api</a></li>
                            <li><a href="www.kaefik.ru/category/rust.html">rust</a></li>
                            <li><a href="www.kaefik.ru/category/sailfish.html">sailfish</a></li>
                            <li><a href="www.kaefik.ru/category/security.html">security</a></li>
                            <li><a href="www.kaefik.ru/category/selenium.html">selenium</a></li>
                            <li><a href="www.kaefik.ru/category/shell.html">shell</a></li>
                            <li><a href="www.kaefik.ru/category/swift.html">swift</a></li>
                            <li><a href="www.kaefik.ru/category/tatar.html">tatar</a></li>
                            <li><a href="www.kaefik.ru/category/video.html">video</a></li>
                            <li><a href="www.kaefik.ru/category/vim.html">vim</a></li>
                            <li><a href="www.kaefik.ru/category/voice-assistant.html">voice-assistant</a></li>
                            <li><a href="www.kaefik.ru/category/vscode.html">vscode</a></li>
                            <li><a href="www.kaefik.ru/category/web.html">web</a></li>
                            <li><a href="www.kaefik.ru/category/windows.html">windows</a></li>
                    </ul>
                <div>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="www.kaefik.ru/2018/01/12/hackintosh-all/" rel="bookmark"
           title="Permalink to Хакинтоши наше всё!">Хакинтоши наше всё!</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>Fri 12 January 2018</span>
<span>| tags: <a href="www.kaefik.ru/tag/khakintosh.html">хакинтош</a><a href="www.kaefik.ru/tag/macos.html">macos</a><a href="www.kaefik.ru/tag/virtualbox.html">virtualbox</a><a href="www.kaefik.ru/tag/hackintosh.html">hackintosh</a><a href="www.kaefik.ru/tag/pc.html">pc</a></span>
</footer><!-- /.post-info -->      <h2>Полезные ссылки</h2>
<ul>
<li><a href="https://host-consult.ru/macos-sierra-virtualbox/">Установка MacOS 10.12 Sierra на VirtualBox</a></li>
<li><a href="https://habrahabr.ru/post/318164/">Почему Hackintosh уже актуален. Развенчание мифов</a></li>
<li><a href="https://superuser.com/questions/505821/making-a-bootable-osx-usb-from-dmg-on-linux">https://superuser.com/questions/505821/making-a-bootable-osx-usb-from-dmg-on-linux</a></li>
<li><a href="https://rutracker.org/forum/viewtopic.php?t=5458088">https://rutracker.org/forum/viewtopic.php?t=5458088</a></li>
<li><a href="http://osxarena.com/2016/09/hackintosh-bios-settings-macos-sierra/">Hackintosh BIOS Settings for MacOs Sierra</a></li>
<li><a href="http://www.insanelymac.com/forum/topic/288751-dsdt-for-asus-p8h77-m-le/">DSDT for Asus P8H77-M LE</a></li>
<li><a href="https://habrahabr.ru/post/318448/">Хакинтош: разворачиваем macOS Sierra на Intel-PC подробно и понятно</a></li>
<li><a href="http://4pda.ru/forum/index.php?showtopic=828222&amp;st=20">macOS High Sierra 10.13</a> (4pda)</li>
<li><a href="http://wiki.osx86project.org/wiki/index.php/Main_Page">OSX86Project WIki</a></li>
<li><a href="https://www.osx86.net/">OSX86</a></li>
</ul>
<h2>Проверка железа для Mac</h2>
<ul>
<li><a href="http://browser.geekbench.com/">проверка процессора</a> (в поиске пишем название процессора и в конце вставляем mac)</li>
<li><a href="https://applelife.ru/forums/hackintosh-hardware/">applelife</a> раздел Железо, Видеокарты</li>
</ul>
<h2>материнская плата ASUS</h2>
<ul>
<li><a href="https://www.asus.com/Motherboards/P8H77V_LE/HelpDesk_CPU/">характеристики P8H77-V LE</a></li>
<li><a href="http://www.macbreaker.com/2012/11/how-to-set-up-asus-hackintosh.html">How to set up an ASUS Hackintosh</a></li>
<li><a href="https://www.tonymacx86.com/threads/asus-p8h77-v-core-i7-3770-intel-hd-4000-dual-boot-mavericks-10-9-windows-8.112937/">ASUS P8H77-V - Core i7 3770 - Intel HD 4000 - Dual Boot Mavericks 10.9 + Windows 8</a></li>
<li><a href="https://applelife.ru/threads/intel-hd-2500-ivybridge-zavod-tolko-hdmi.40629/">Intel HD 2500 IvyBridge завод только HDMI?</a></li>
<li><a href="http://www.insanelymac.com/forum/topic/287668-guide-intel-hd2500-full-resolution-and-qeci-1083/">[Guide] Intel HD2500 Full Resolution and QE/CI (10.8.3+)</a></li>
<li><a href="https://www.youtube.com/watch?v=R9N15KuY-Hw">Intel HD Graphics 2500 и Hackintosh Mac OS X</a> (видео)</li>
<li><a href="https://www.youtube.com/watch?v=8rddlgnrnvs">Intel Graphics 2000/2500/3000/4000/5000/Hd Graphics All Fix - Hackintosh</a></li>
</ul>
<h2>Настройка, расширения</h2>
<ul>
<li><a href="https://applelife.ru/threads/faq-kak-ustanavlivat-kexty-i-redaktirovat-ix-info-plist.2450/">[FAQ] Как устанавливать kext'ы и редактировать их Info.plist</a></li>
</ul>
<h2>Clover</h2>
<ul>
<li><a href="https://i.applelife.ru/2017/02/257139_1954cc576b429d6a230987406411c6c0.pdf">о Clover</a>(pdf)</li>
<li><a href="http://efi.akeo.ie/">EFI Drivers</a></li>
<li><a href="https://www.tonymacx86.com/threads/efistub-loading-linux-from-clover-without-grub.200300/">https://www.tonymacx86.com/threads/efistub-loading-linux-from-clover-without-grub.200300/</a></li>
</ul>
<h2>Мой опыт установки MacOS на PC</h2>
<p>Получилось установить MacOS 10.10 Yosemite и 10.13, само собой не работает сеть вайфая, буду позже пробовать.
Моя конфигурация:</p>
<ul>
<li>материнская плата<a href="https://www.asus.com/Motherboards/P8H77V_LE/HelpDesk_CPU/">P8H77-V LE</a></li>
<li>процессор Core i3-3220 3.30ГГц (Ivy Bridge) со встроеной графикой HD 2500</li>
</ul>
<p>встроеная графика в этом процессоре проблемная, получилось завести на 10.10  с помощью определенных манипуляций (работает только DVI и HDMI)</p>
<p><strong>Настройка BIOS:</strong> </p>
<ul>
<li>
<p>internal grarhics memory size - 32Mb</p>
</li>
<li>
<p>отключить виртуализацию</p>
</li>
<li>
<p>конфигурация SATA - режим AHCI</p>
</li>
</ul>
<p><strong>Настройки конфигурации при запуске Clover:</strong> </p>
<ul>
<li>
<p>CPU: включить PatchAPIC</p>
</li>
<li>
<p>GPU: включить LoadVideoBios; Inject Intel: fake id: 0x01660003</p>
</li>
<li>
<p>rootless=0 -v kext-dev-mode=1</p>
</li>
</ul>
<p>После установки MacOS на диск нужно выполнить команду в терминале, чтобы можно было установить загрузчик Clover и другие сторонние программы:</p>
<div class="highlight"><pre><span></span>sudo spctl --master-disable
</pre></div>


<p>После установки загрузчика я просто скопировал параметры загрузчика и файлы из флешки установочной в раздел загрузки на диске.</p>
<p><strong>Настройка встроеного звука P8H77-V LE</strong></p>
<p>источник (видео): <a href="https://www.youtube.com/watch?v=oOwd4ccDVgs">https://www.youtube.com/watch?v=oOwd4ccDVgs</a></p>
<ul>
<li><a href="https://github.com/vit9696/AppleALC/wiki/Supported-codecs">AppleALC</a></li>
<li><a href="https://github.com/vit9696/Lilu/releases">Lilu</a></li>
</ul>
<p>закинуть патчи AppleALC и Lilu в загрузчик Clover в папку kext/Other.
В конфиг файл кловера нужно в раздел Devices в поле Audio число 5 (так как на материнке три выхода).
После перезагрузки, смотрим в настройках -&gt; Звук там должны определится устройства и должен работать звук.
PS. если на материнке 5 выходов для звука, то указываем число 7. Если ноутбук и три выхода, то число 3.</p>
<p><strong>Сетевая карта Realtek 9111F</strong>
- <a href="https://github.com/RehabMan/OS-X-Realtek-Network">Fork of Mieze's Realtek RTL8111 Network Driver by RehabMan</a></p>
<p><strong>Настройка PCI Express WiFi карты TP-LINK TL-WN781ND</strong> </p>
<p><a href="https://www.youtube.com/watch?v=3PgHDYleXRk&amp;list=PLOsZ5pPzejqhoQR29IfU9y0gk6qsD3o_e&amp;index=11">Patch Wifi Kext Atheros AR5B95 / AR9285</a>- способ который помог завезти
<a href="https://applelife.ru/threads/tp-link-wn781nd-atheros-ar9285-802-11n-pci-e-wifi.27275/page-2">TP-LINK WN781ND (Atheros Ar9285) 802.11n pci-e wifi</a></p>
<hr>
<p>Данная тема посвящена WiFi платам TP-LINK TL-WN781ND, и в настоящее время требует обновления:
Внимание! В продажу пошла обновленная версия плат TP-LINK WN781ND, которые под Mac OS X не заводятся!</p>
<p>Отличия карт:</p>
<p>TP-LINK TL-WN781ND версия 1:
Выпускается с 2010 года
Чипсет: Atheros AR9285
Идентификаторы VendorID: 168c, DeviceID: 002b
Под Mac OS X заводится подменой DeviceID, как ранее рассказано в данной теме****06:00.0 Network controller: Qualcomm Atheros AR9285 Wireless Network Adapter (PCI-Express) (rev 01)
Subsystem: Qualcomm Atheros Device 30a1
Flags: bus master, fast devsel, latency 0, IRQ 19
Memory at f7c00000 (64-bit, non-prefetchable) [size=64K]
Capabilities: <access denied>
Kernel driver in use: ath9k
Kernel modules: ath9k</p>
<h3>Настройка двойной загрузки</h3>
<p>​                Dual boot OS X and Arch Linux with Clover?</p>
<p><strong>Информация найденая в просторах интернета</strong></p>
<blockquote>
<p><em>I recently installed Yosemite 10.10.2 as an update to my previous Mavericks based hackintosh. I now have graphics issues, specifically at the log on screen and in google chrome (but not safari). Portions of the screen are glitchy and flash what is being displayed on and off. Everything else works fine, no other program has this issue.</em></p>
<p><em>As I said, I previously had Mavericks installed and the graphics worked fine (with the exception of some lagging while using LaunchPad, this installation has the same issue).</em></p>
<p><em>Specs:</em>
<em>Intel i5-3570 @ 3.9GHZ</em>
<em>8GB 1600Mhz DDR3 Ram</em>
<em>Gigabyte GA-B75M-D3P Motherboard</em></p>
<p><em>I've tried these things so far:</em>
<em>Changing BIOS video memory from 64M to 32M</em>
<em>Switching on GraphicsEnabler = Yes in multibeast</em>
<em>Changing system defition from Mac Pro to Mac Mini (neither worked)</em>
<em>Enabling the Intel Graphics Patch for Mixed Configurations</em></p>
</blockquote>
<p><em>EDIT: UPDATED AS OF 22-APRIL-2013</em></p>
<p>AS of 10.8.3, the stock Apple kexts include the dev-id of the Ivy Bridge HD2500 IGPU.</p>
<p><strong>*Know issue:*</strong>
- Works only with DVI/HDMI. No analog VGA.</p>
<p><strong><em>Prerequisites:*
</em>*- Connect your display to your motherboard's DVI or HDMI port.
- Enable the integrated GPU in your BIOS/UEFI
- Set the vram in your computer's BIOS/UEFI to </strong>32MB**.
- Mac OS X 10.8.3+ with untouched kexts.</p>
<p><strong><em>Instructions:</em></strong> (Tip: Use the chameleon wizard app)
1- Enable Chameleon's Graphics Enabler.
2- Set smbios to Macmini6,2
3- Inject the following EFI device properties</p>
<p><strong>ig-platform-id: 0166000B, Shared RAM for FB: 32MB, Pipes: 2, Ports: 3, FBMem: 2</strong></p>
<p>Code (Text):</p>
<p>[COLOR=#000000]7f0000000100000001000000730000000200000002010c00d041030a000000000101060000027fff04002c0000004100410050004c002c00690067002d0070006c006100740066006f0072006d002d00690064000000080000000b006601140000006800640061002d0067006600780000000d0000006f6e626f6172642d31[/COLOR]</p>
<p>On reboot, the card will be detected as Intel HD4000, and you'll have full resolution and QE/CI <img alt="[IMG]" src="https://www.tonymacx86.com/proxy.php?image=http%3A%2F%2Fwww.insanelymac.com%2Fforum%2Fpublic%2Fstyle_emoticons%2Fdefault%2Fbiggrin.png&amp;hash=ddc2af1faf3d959133a16e0d2af61fc6"></p>
<hr>
<p>***Troubleshooting:</p>
<p>***If it doesn't work, you might need to inject the platform-id using DSDT.
Remove the string and disable the Chameleon's graphics enabler.</p>
<p>Find the device with address <strong><em>Name (_ADR, 0x00020000)*</em>* and rename it </strong><em>IGPU</em>** and add this method right below the line. You may need to renames all references to this device in the DSDT to avoid compile errors.</p>
<hr>
<blockquote>
<p>Method (_DSM, 4, NotSerialized)
{
Store (Package (0x02)
{
"AAPL,ig-platform-id",
Buffer (0x04)
{
0x0B, 0x00, 0x66, 0x01
}
}, Local0)
DTGP (Arg0, Arg1, Arg2, Arg3, RefOf (Local0))
Return (Local0)
}</p>
</blockquote>
<p>-------------------</p>
<p>config.plist/Graphics/Inject/Intel=true
config.plist/Graphics/ig-platform-id=valid-ig-platform-id for HD4000 that works (likely 0x0166000a)
config.plist/Devices/FakeID/IntelGFX=0x01668086</p>
<p>other requirements:
- DVMT-prealloc set to 64mb.
- VT-d disabled (or use dart=0)
- digital connection to monitor (VGA not supported)</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/oILnur">Twitter</a></li>
                            <li><a href="mailto: ilnursoft@gmail.com">Email</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>